[
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": "customer_by_doctype = {\n    \"Quotation\": {\n        \"customer\": \"party_name\",\n        \"filters\": {\n            \"docstatus\": [\"in\", [1, 2]],\n            \"workflow_state\": [\"!=\", \"Cancelado\"]\n        }\n    },\n    \"Sales Order\": {\n    \t\"customer\": \"customer\",\n    \t\"filters\": {\n    \t\t\"docstatus\": 1\n    \t}\n    },\n    \"Sales Invoice\": {\n    \t\"customer\": \"customer\",\n    \t\"filters\": {\n    \t\t\"docstatus\": 1\n    \t}\n    },\n    \"Ordem Servico Interna\": {\n    \t\"customer\": \"customer\",\n    \t\"filters\": {}\n    },\n    \"Ordem Servico Externa\": {\n    \t\"customer\": \"customer\",\n    \t\"filters\": {\n    \t    \"status_order_service\": \"Encerrada\",\n    \t}\n    },\n    \"Equipamentos\": {\n    \t\"customer\": \"customer\",\n    \t\"filters\": {}\n    }\n}\n\ncontext.contact_customers = frappe.get_all(\"Dynamic Link\", fields=[\"link_name\"], filters={\n    \"parenttype\": \"Contact\",\n    \"parent\": frappe.db.exists(\"Contact\", {\"user\": frappe.session.user})\n})\n\ncontext.rows = frappe.get_list(frappe.form_dict.doctype, fields=\"*\", filters={\n     customer_by_doctype[frappe.form_dict.doctype][\"customer\"]: [\"in\", [cust.link_name for cust in context.contact_customers]], \n    ** customer_by_doctype[frappe.form_dict.doctype][\"filters\"]\n})\nif frappe.form_dict.doctype == \"Quotation\":\n    for row in context.rows:\n        if row.get(\"workflow_state\") == \"Reprovado\":\n             row[\"status\"] = \"Reprovado - Orçamento Reprovado\"\n        elif row.get(\"status\") == \"Ordered\" or row.get(\"workflow_state\") == \"Aprovado\":\n             row[\"status\"] = \"Pedido - Seu pedido foi realizado\"\n        elif row.get(\"status\") == \"Open\":\n             row[\"status\"] = \"Aberto - Aguardando pedido ser realizado\"\n        \n\ncontext.fields_by_doctype = {\n    \"Quotation\": [\"name\", \"status\",\"net_total\"], \n    \"Sales Order\": [\"name\",\"status\", \"net_total\"],\n    \"Sales Invoice\": [\"name\",\"status\",\"numero_da_nf\", \"net_total\"],\n    \"Ordem Servico Interna\": [\"name\", \"status_order_service\", \"equipment_description\"],\n    \"Ordem Servico Externa\": [\"name\", \"status_order_service\", \"repair_status\", \"equipment_description\"],\n    \"Equipamentos\": [\"name\", \"modelo_equipamento\", \"tag\"]\n}\n",
  "css": "",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 1,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 0,
  "javascript": "$(document).ready(() => new DataTable(\"table\", {\n    language: {\n        url: \"/assets/ordem_servico/datatables/pt-BR.json\"\n    }\n}));",
  "main_section": null,
  "main_section_html": "{% set fields = fields_by_doctype.get(frappe.form_dict.doctype, [] ) %}\n\n{% set meta = frappe.get_meta(frappe.form_dict.doctype) %}\n<table class=\"table table-condensed table-stripped\">\n    <thead>\n        {% for field in fields %}\n            <th>{{ _(meta.get_label(field)) }}</th>\n        {% endfor %}\n        <th>{{ _(\"Actions\") }}</th>\n    </thead>\n    <tbody>\n      {% for row in rows %}\n          <tr>\n             {% for field in fields %}\n             <td>{{ _(row.get(field)) or \"\" }}</td>\n             {% endfor %}\n             <td><a href=\"/ver/{{ frappe.form_dict.doctype }}/{{ row.name }}\" target=\"_blank\">{{ _(\"View\") }}</a></td>\n         </tr>\n      {% endfor %}\n    </tbody>\n</table>\n\n\n\n\n\n\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-10-16 11:14:07.854607",
  "module": null,
  "name": "lista",
  "page_blocks": [],
  "published": 1,
  "route": "lista/<doctype>",
  "show_sidebar": 1,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Lista",
  "website_sidebar": null
 },
 {
  "breadcrumbs": "",
  "content_type": "HTML",
  "context_script": "try:\n    context.doc = frappe.get_doc(frappe.form_dict.doctype, frappe.form_dict.docname)\n    context.doc.check_permission()\n\nexcept frappe.DoesNotExistError:\n    # Lança uma exceção se o orçamento não for encontrado\n    frappe.throw(_(\"Documento não encontrado.\"), frappe.PermissionError)\n\n\nif not context.doc:\n     frappe.throw(_(\"Você não tem permissão para acessar este documento.\"), frappe.PermissionError)\n\nif context.doc.doctype == \"Quotation\":\n    context.contact_customers = frappe.get_all(\"Dynamic Link\", fields=[\"link_name\"], filters={\n        \"parenttype\": \"Contact\",\n        \"parent\": frappe.db.exists(\"Contact\", {\"user\": frappe.session.user})\n    })\n\n    lista_clientes = [d['link_name'] for d in context.contact_customers]\n\n    if context.doc.party_name in lista_clientes:\n        \n        pass \n    else:\n       \n        frappe.throw(_(\"Você não tem permissão para acessar este documento.\"), frappe.PermissionError)\n        \n\n  \ncontext.history = frappe.get_all(\"Milestone\", fields=[\"*\"], filters={\n\"reference_name\": frappe.form_dict.docname,\n},\norder_by=\"creation asc\")\ncontext.parents = [\n    {\n         \"label\": _(\"Portal\"),\n         \"route\": \"/me\",\n     },\n     {\n         \"label\": _(frappe.form_dict.doctype),\n         \"route\": \"/lista/\" + frappe.form_dict.doctype\n      },\n     {\n        \"label\": _(frappe.form_dict.docname),\n       \"route\": \"/ver/\" + frappe.form_dict.doctype + \"/\" + frappe.form_dict.docname\n     }\n]\ndef get_orders_for_equipment(name):\n    return frappe.get_all('Ordem Servico Interna', filters={'serie_number': name, 'customer':customer}, fields=['name'])\n    return frappe.get_all('Ordem Servico Externa', filters={'serie_number': name, 'customer':customer}, fields=['name'])\n    \n\n    ",
  "css": ".web-sidebar{\ndisplay:none !important;\n}\n.sidebar-column{\ndisplay:none !important;\n}\n\n#page-error > div > main > div.page_content > div.error-content{\n    display:none !important;\n}\n\n/*Timeline dos status*/\n.timeline-container {\nposition: relative;\noverflow-x: auto; /* Permite rolagem horizontal */\npadding: 20px 0;\nwhite-space: nowrap;\n}\n.timeline {\nposition: relative;\ndisplay: flex;\nalign-items: center;\npadding: 20px 0;\nwhite-space: nowrap;\n}\n.timeline-items {\ndisplay: flex;\nalign-items: center;\nposition: relative;\nz-index: 2;\n}\n.timeline-item {\nposition: relative;\nwidth: 200px; /* Ajuste conforme necessário */\nmargin-right: 30px; /* Espaçamento entre itens */\npadding: 10px;\nbackground-color: #f9f9f9;\nborder-radius: 6px;\nbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\ntext-align: center; /* Alinhamento centralizado do conteúdo */\n}\n.timeline-item:last-child {\nmargin-right: 0;\n}\n.timeline-item:before {\ncontent: '';\nposition: absolute;\ntop: 50%;\nleft: -10px; /* Ajuste conforme necessário */\nwidth: 10px;\nheight: 10px;\nbackground-color: #007bff;\nborder-radius: 50%;\nborder: 2px solid #fff;\ntransform: translateY(-50%);\nz-index: 1;\n}\n.timeline-line {\nposition: absolute;\ntop: 50%;\nleft: 20px; /* Ajuste conforme necessário */\nheight: 2px;\nbackground-color: #007bff;\ntransform: translateY(-50%);\nz-index: 1;\n}\n}",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 1,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 1,
  "javascript": "\n",
  "main_section": null,
  "main_section_html": "<!--History-->\n{% macro render_history(rows) %}\n <div class=\"container\">\n        <div class=\"timeline-container\">\n            <div class=\"timeline\">\n                <div class=\"timeline-items\">\n                    {% for row in rows %}\n                    <div class=\"timeline-item\">\n                        <div class=\"timeline-item-content\">\n                            <div class=\"timeline-value\"><b>{{ row.value }}</b></div>\n                            <div class=\"timeline-date\">\n                                {{ frappe.utils.formatdate(row.creation) }} às {{ frappe.utils.format_time(row.creation) }}\n                            </div>\n                        </div>\n                    </div>\n                    {% endfor %}\n                </div>\n                <div class=\"timeline-line\"></div>\n            </div>\n        </div>\n    </div>\n    <script>\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            const timelineItems = document.querySelector('.timeline-items');\n            const timelineLine = document.querySelector('.timeline-line');\n            \n            timelineLine.style.width = `${timelineItems.scrollWidth}px`;\n        });\n    </script>\n{% endmacro %}\n\n\n\n\n\n\n\n\n\n\n<!--Sales Order-->\n{% macro render_sales_order(doc) %} \n<div class=\"row\">\n    {% if doc.doctype == \"Sales Order\" %}\n    <div class=\"col col-sm-4\"><a href=\"../../Quotation/{{ doc.quotation_name }}\">{{ doc.quotation_name }}</a></div>\n    {% endif %}\n    <div class=\"col col-sm-4\">{{ doc.name }}</div>\n    <div class=\"col col-sm-4\">{{ doc.transaction_date }}</div>\n    <div class=\"col col-sm-4\">{{ doc.customer_name }}</div>\n    <div class=\"col col-sm-4\">{{ doc.contact_display }}</div>\n    <div class=\"col col-sm-4\">{{ _(doc.status) }}</div>\n    {% if doc.doctype == \"Sales Order\" %}\n    <button class=\"btn btn-sm btn-secondary dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">\n\t\t\t\t<span class=\"font-md\">Ações</span>\n\t\t\t\t<b class=\"caret\"></b>\n\t</button>\n\t<ul class=\"dropdown-menu dropdown-menu-right\" role=\"menu\">\n\t\t\t\t{% if doc.company == \"ER Analitica\" %}\n\t\t\t\t<a class=\"dropdown-item\" href=\"/printview?doctype=Sales Order&amp;name={{ doc.name }}&amp;format=Confirmacao de pedido\" target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\tConfirmação de pedido\n\t\t\t\t</a>\n\t\t\t\t{% endif %}\n\t\t\t\t{% if doc.company == \"ER Metrologia\" %}\n\t\t\t\t<a class=\"dropdown-item\" href=\"/printview?doctype=Sales Order&amp;name={{ doc.name }}&amp;format=Confirmacao de pedido VR\" target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\tConfirmação de pedido VR\n\t\t\t\t</a>\n\t\t\t\t{% endif %}\n\t</ul>\n\t{% endif %}\n\t\n\t\n\n   \n</div>\n\n\t<div class=\"order-container mt-4\">\n\t\t\t<!-- items -->\n\t\t\t<div class=\"w-100\">\n\t\t\t\t<div class=\"order-items order-item-header mb-1 row text-muted\">\n\t\t\t\t\t<span class=\"col-5\">z\n\t\t\t\t\t\tItem\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"d-s-n col-3\">\n\t\t\t\t\t\tQuantidade\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"col-2 pl-10\">\n\t\t\t\t\t\tTaxa\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"col-2 text-right\">\n\t\t\t\t\t\tMontante\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class=\"order-items row align-items-center\">\n\t\t\t\t\t<span class=\"order-item-name col-5 pr-0\">\n\t\t\t\t\t\t\n\t    <div class=\"row item_name_and_description\">\n\t\t    <div class=\"col-xs-4 col-sm-2 order-image-col\">\n\t\t\t    <div class=\"order-image h-100\">\n\t\t\t\t\n\t\t\t\t\t<div class=\"no-image-cart-item\" style=\"min-height: 100px;\">\n\t\t\t\t\t\tTP\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t    </div>\n\t\t</div>\n\t\t\n\t\t\n\t\t{% for item in doc.items %}\n\t\t<div class=\"col-xs-8 col-sm-10\">\n\t\t\t{{item.item_name}}\n\t\t\t<div class=\"text-muted small item-description\">\n\t\t\t\t{{item.description}} \n\n\t\t\t</div>\n\t\t\t<span class=\"text-muted mt-2 d-l-n order-qty\">\n\t\t\t\tQtd(2)\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span class=\"d-s-n col-3 pl-10\">\n\t\t\t\t\t\t{{item.qty}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"order-rate pl-4 col-2\">\n\t\t\t\t\t\tR$ {{ '{:,.2f}'.format(item.net_rate).replace(',','.') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"col-2 text-right\">\n\t\t\t\t\t\tR$ {{ '{:,.2f}'.format(item.net_amount).replace(',','.') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n         \n\t\t\t<!-- taxes -->\n\t\t\t<div class=\"\">\n\t\t\t{% endfor %}\n\t\t\t\t\n\n\n\n\n\n\n\t\n\n\n<div class=\"w-100 mt-5 order-taxes font-weight-bold\">\n\t<div class=\"col-4 d-flex\">\n\t\t<div class=\"item-grand-total col-8\">\n\t\t\tTotal Geral\n\t\t</div>\n\t\t<div class=\"item-grand-total col-4 text-right pr-0\">\n\t\t\t{% set m = frappe.get_doc(\"Currency\", doc.currency) %}{{doc.get_formatted('net_total')}}\n\t\t</div>\n\t</div>\n</div>\n\t\t\t</div>\n\t\t</div>\n\t\n{% endmacro %} \n\n{% if doc.doctype == \"Sales Order\" %} \n{{ render_sales_order(doc) }} \n{% endif %}\n<!--Sales Order-->\n\n\n\n\n\n\n\n<!--Quotation-->\n{% macro render_quotation(doc) %} \n<div class=\"row\">\n    <div class=\"col col-sm-4\">{{ doc.name }}</div>\n    <div class=\"col col-sm-4\">{{ doc.transaction_date }}</div>\n    <div class=\"col col-sm-4\">{{ doc.customer_name }}</div>\n    <div class=\"col col-sm-4\">{{ doc.contact_display }}</div>\n    <div class=\"col col-sm-4\">{{ _(doc.status) }}</div>\n    {% if doc.pre_orcamento == 0 %}\n    <div class=\"col col-sm-4\"><a href=\"../../app/ordem-servico-interna/{{ doc.os_interna_link }}\">{{ doc.os_interna_link }}</a></div>\n    {% endif %}\n    {% if doc.doctype == \"Quotation\" %}\n    <button class=\"btn btn-sm btn-secondary dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">\n\t\t\t\t<span class=\"font-md\">Ações</span>\n\t\t\t\t<b class=\"caret\"></b>\n\t</button>\n\t<ul class=\"dropdown-menu dropdown-menu-right\" role=\"menu\">\n\t\t\t\t {% if doc.company == \"ER Analitica\" %}\n\t\t\t\t<a class=\"dropdown-item\" href=\"/printview?doctype=Quotation&amp;name={{ doc.name }}&amp;format=Orcamento\" target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\tOrçamento\n\t\t\t\t</a>\n\t\t\t\t{% endif %}\n\t\t\t\t\n\t\t\t\t{% if doc.company == \"ER Metrologia\" %}\n\t\t\t\t<a class=\"dropdown-item\" href=\"/printview?doctype=Quotation&amp;name={{ doc.name }}&amp;format=VR INTR\" target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\tVR Instrumentação\n\t\t\t\t</a>\n\t\t\t\t{% endif %}\n\t\t\t\t<a class=\"dropdown-item\" href=\"/printview?doctype=Quotation&amp;name={{ doc.name }}&amp;format=Proposta Tecnica\" target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\tProposta Técnica\n\t\t\t\t</a>\n\t</ul>\n\t{% endif %}\n\t\n\t\n\n   \n</div>\n<div class=\"row\">\n    <div class=\"col-12\">\n\t<div class=\"order-container mt-4\">\n\t    \n\t\t\t<!-- items -->\n\t\t\t<div class=\"w-100\">\n\t\t\t\t<div class=\"order-items order-item-header mb-1 row text-muted\">\n\t\t\t\t\t<span class=\"col-5\">\n\t\t\t\t\t\tItem\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"d-s-n col-3\">\n\t\t\t\t\t\tQuantidade\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"col-2 pl-10\">\n\t\t\t\t\t\tTaxa\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"col-2 text-right\">\n\t\t\t\t\t\tMontante\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class=\"order-items row align-items-center\">\n\t\t\t\t\t<span class=\"order-item-name col-5 pr-0\">\n\t\t\t\t\t\t\n\t<div class=\"row item_name_and_description\">\n\t\t<div class=\"col-xs-4 col-sm-2 order-image-col\">\n\t\t\t<div class=\"order-image h-100\">\n\t\t\t\t\n\t\t\t\t\t<div class=\"no-image-cart-item\" style=\"min-height: 100px;\">\n\t\t\t\t\t\tTP\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t\t{% for item in doc.items %}\n\t\t<div class=\"col-xs-8 col-sm-10\">\n\t\t\t{{item.item_name}}\n\t\t\t<div class=\"text-muted small item-description\">\n\t\t\t\t{{item.description}} \n\n\t\t\t</div>\n\t\t\t<span class=\"text-muted mt-2 d-l-n order-qty\">\n\t\t\t\tQtd(2)\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span class=\"d-s-n col-3 pl-10\">\n\t\t\t\t\t\t{{item.qty}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"order-rate pl-4 col-2\">\n\t\t\t\t\t\tR$ {{ '{:,.2f}'.format(item.net_rate).replace(',','.') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"col-2 text-right\">\n\t\t\t\t\t\tR$ {{ '{:,.2f}'.format(item.net_amount).replace(',','.') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n         \n\t\t\t<!-- taxes -->\n\t\t\t<div class=\"\">\n\t\t\t{% endfor %}\n\t\t\t\t\n\n<div class=\"w-100 mt-5 order-taxes font-weight-bold\">\n\t<div class=\"col-4 d-flex\">\n\t\t<div class=\"item-grand-total col-8\">\n\t\t\tTotal Geral\n\t\t</div>\n\t\t<div class=\"item-grand-total col-4 text-right pr-0\">\n\t\t\t{% set m = frappe.get_doc(\"Currency\", doc.currency) %}{{doc.get_formatted('net_total')}}\n\t\t</div>\n\t</div>\n</div>\n\t\t\t</div>\n\t\t</div>\n\t\t</div>\n\t\t</div>\n{% endmacro %} \n\n{% if doc.doctype == \"Quotation\" %} \n{{ render_quotation(doc) }} \n{% endif %}\n<!--Quotation-->\n\n\n\n\n\n\n<!--Sales Invoice-->\n{% macro render_sales_invoice(doc, arquivo) %} \n<div class=\"row\">\n    <div class=\"col col-sm-4\">{{ doc.name }}</div>\n    <div class=\"col col-sm-4\">{{ doc.posting_date }}</div>\n    <div class=\"col col-sm-4\">{{ doc.customer_name }}</div>\n    <div class=\"col col-sm-4\">{{ doc.contact_display }}</div>\n    <div class=\"col col-sm-4\">{{ _(doc.status) }}</div>\n    <div class=\"col col-sm-4\"><a href=\"../../app/sales-order/{{ doc.reference_name }}\">{{ doc.reference_name }}</a></div>\n</div>\n\n\t<div class=\"order-container mt-4\">\n\t\t\t<!-- items -->\n\t\t\t<div class=\"w-100\">\n\t\t\t\t<div class=\"order-items order-item-header mb-1 row text-muted\">\n\t\t\t\t\t<span class=\"col-5\">\n\t\t\t\t\t\tItem\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"d-s-n col-3\">\n\t\t\t\t\t\tQuantidade\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"col-2 pl-10\">\n\t\t\t\t\t\tTaxa\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"col-2 text-right\">\n\t\t\t\t\t\tMontante\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class=\"order-items row align-items-center\">\n\t\t\t\t\t<span class=\"order-item-name col-5 pr-0\">\n\t\t\t\t\t\t\n\t<div class=\"row item_name_and_description\">\n\t\t<div class=\"col-xs-4 col-sm-2 order-image-col\">\n\t\t\t<div class=\"order-image h-100\">\n\t\t\t\t\n\t\t\t\t\t<div class=\"no-image-cart-item\" style=\"min-height: 100px;\">\n\t\t\t\t\t\tTP\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t\t{% for item in doc.items %}\n\t\t<div class=\"col-xs-8 col-sm-10\">\n\t\t\t{{item.item_name}}\n\t\t\t<div class=\"text-muted small item-description\">\n\t\t\t\t{{item.description}} \n\n\t\t\t</div>\n\t\t\t<span class=\"text-muted mt-2 d-l-n order-qty\">\n\t\t\t\tQtd(2)\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span class=\"d-s-n col-3 pl-10\">\n\t\t\t\t\t\t{{item.qty}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"order-rate pl-4 col-2\">\n\t\t\t\t\t\tR$ {{ '{:,.2f}'.format(item.net_rate).replace(',','.') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"col-2 text-right\">\n\t\t\t\t\t\tR$ {{ '{:,.2f}'.format(item.net_amount).replace(',','.') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n         \n\t\t\t<!-- taxes -->\n\t\t\t<div class=\"\">\n\t\t\t{% endfor %}\n\t\t\t\t\n\n<div class=\"w-100 mt-5 order-taxes font-weight-bold\">\n\t<div class=\"col-4 d-flex\">\n\t\t<div class=\"item-grand-total col-8\">\n\t\t\tTotal Geral\n\t\t</div>\n\t\t<div class=\"item-grand-total col-4 text-right pr-0\">\n\t\t\t{% set m = frappe.get_doc(\"Currency\", doc.currency) %}{{doc.get_formatted('net_total')}}\n\t\t</div>\n\t</div>\n</div>\n\t\t\t</div>\n\t\t</div>\n\t<h3>Notas Fiscais e Boletos</h3>\n\t<hr>\n\t{% for d in arquivo %}\n\t<table width=\"100%\" class=\"table table-striped table-bordered table-sm border-dark\">\n    <tr style=\"font-weight:bold; background: #eee; color:#36414c; border: 1px solid #d1d8dd;\">\n      <td width=\"20%\" colspan=\"4\"><a href=\"{{d.file_url}}\" target=\"blank\">{{ d.file_url }}</a></td>\n    </tr>\n    </table>\n\t{% endfor %}\n{% endmacro %} \n\n{% if doc.doctype == \"Sales Invoice\" %} \n{% set arquivo = frappe.get_all('File', filters={'attached_to_name': doc.name}, fields=['file_url']) %}\n{{ render_sales_invoice(doc, arquivo) }} \n{% endif %}\n<!--Sales Invoice-->\n\n\n\n\n\n\n\n<!--Ordem Servico Interna-->\n{% macro render_ordem_servico_interna(doc, arquivo) %} \n{{ render_history(history) }}\n<div class=\"row\" style=\"margin:10px;\">\n    <div class=\"col col-sm-4\">{{ doc.name }}</div>\n    <div class=\"col col-sm-4\">{{ doc.status_order_service }}</div>\n    <div class=\"col col-sm-4\">{{ doc.customer }}</div>\n    <div class=\"col col-sm-4\">{{ frappe.db.get_value(\"Contact\", doc.contact_link, \"first_name\") }}</div>\n    <div class=\"col col-sm-4\"><a href=\"../../app/quotation/{{ doc.quotation_name }}\">{{ doc.quotation_name }}</a></div>\n    <div class=\"col col-sm-4\"><a href=\"../../app/sales-invoice/{{ doc.invoice_name }}\">{{ doc.invoice_name }}</a></div>\n    {% if doc.doctype == \"Ordem Servico Interna\" %}\n    <button class=\"btn btn-sm btn-secondary dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">\n\t\t\t\t<span class=\"font-md\">Ações</span>\n\t\t\t\t<b class=\"caret\"></b>\n\t</button>\n\t<ul class=\"dropdown-menu dropdown-menu-right\" role=\"menu\">\n\t\t\t\t\n\t\t\t\t<a class=\"dropdown-item\" href=\"/printview?doctype=Ordem Servico Interna&amp;name={{ doc.name }}&amp;format=Laudo Tecnico\" target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\tLaudo Técnico\n\t\t\t\t</a>\n\t\t\t\n\t</ul>\n\t{% endif %}\n\n</div>\n\t<hr>\n\t<h3>Equipamento</h3>\n\t<hr>\n\t<div class=\"col col-sm-4\">{{ doc.serie_number }}</div>\n    <div class=\"col col-sm-4\">{{ doc.equipment_model }}</div>\n    <div class=\"col col-sm-4\">{{ doc.equipment_tag }}</div>\n    <div class=\"col col-sm-4\">{{ doc.equipment_description }}</div>\n<hr>\n    \n\t<h3>Certificados e Relatórios</h3>\n\t<hr>\n\t{% for d in arquivo %}\n\t<table width=\"100%\" class=\"table table-striped table-bordered table-sm border-dark\">\n    <tr style=\"font-weight:bold; background: #eee; color:#36414c; border: 1px solid #d1d8dd;\">\n      <td width=\"20%\" colspan=\"4\"><a href=\"{{d.file_url}}\" target=\"blank\">{{ d.file_url }}</a></td>\n    </tr>\n    </table>\n\t{% endfor %}\n\n\n\n{% endmacro %} \n\n{% if doc.doctype == \"Ordem Servico Interna\" %} \n{% set arquivo = frappe.get_all('File', filters={'attached_to_name': doc.name}, fields=['file_url']) %}\n{{ render_ordem_servico_interna(doc, arquivo) }} \n{% endif %}\n<!--Ordem Servico Interna-->\n\n\n\n\n\n\n<!--Ordem Servico Externa-->\n{% macro render_ordem_servico_externa(doc, arquivo) %} \n<div class=\"row\">\n    <div class=\"col col-sm-4\">{{ doc.name }}</div>\n    <div class=\"col col-sm-4\">{{ doc.status_order_service }}</div>\n    <div class=\"col col-sm-4\">{{ doc.repair_status }}</div>\n    <div class=\"col col-sm-4\">{{ doc.customer }}</div>\n    <div class=\"col col-sm-4\">{{ frappe.db.get_value(\"Contact\", doc.contact_link, \"first_name\") }}</div>\n    {% if doc.doctype == \"Ordem Servico Externa\" %}\n    <button class=\"btn btn-sm btn-secondary dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">\n\t\t\t\t<span class=\"font-md\">Ações</span>\n\t\t\t\t<b class=\"caret\"></b>\n\t</button>\n\t<ul class=\"dropdown-menu dropdown-menu-right\" role=\"menu\">\n\t\t\t\t\n\t\t\t\t<a class=\"dropdown-item\" href=\"/printview?doctype=Ordem Servico Externa&amp;name={{ doc.name }}&amp;format=Laudo Tecnico OS Externa\" target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\tLaudo Técnico\n\t\t\t\t</a>\n\t\t\t\n\t</ul>\n\t{% endif %}\n\n</div>\n\t<hr>\n\t<h3>Equipamento</h3>\n\t<hr>\n\t<div class=\"col col-sm-4\">{{ doc.serie_number }}</div>\n    <div class=\"col col-sm-4\">{{ doc.equipment_model }}</div>\n    <div class=\"col col-sm-4\">{{ doc.equipment_tag }}</div>\n    <div class=\"col col-sm-4\">{{ doc.equipment_description }}</div>\n    <hr>\n    \n\t<h3>Certificados e Relatórios</h3>\n\t<hr>\n\t{% for d in arquivo %}\n\t<table width=\"100%\" class=\"table table-striped table-bordered table-sm border-dark\">\n    <tr style=\"font-weight:bold; background: #eee; color:#36414c; border: 1px solid #d1d8dd;\">\n      <td width=\"20%\" colspan=\"4\"><a href=\"{{d.file_url}}\" target=\"blank\">{{ d.file_url }}</a></td>\n    </tr>\n    </table>\n\t{% endfor %}\n\n\n\n{% endmacro %} \n\n{% if doc.doctype == \"Ordem Servico Externa\" %} \n{% set arquivo = frappe.get_all('File', filters={'attached_to_name': doc.name}, fields=['file_url']) %}\n{{ render_ordem_servico_externa(doc, arquivo) }} \n{% endif %}\n<!--Ordem Servico Externa-->\n\n\n\n\n<!--Equipamentos-->\n{% macro render_equipamentos(doc, orders_internas, orders_externas) %} \n<div class=\"row\">\n    <div class=\"col col-sm-4\">{{ doc.name }}</div>\n    <div class=\"col col-sm-4\">{{ doc.modelo_equipamento }}</div>\n    <div class=\"col col-sm-4\">{{ doc.tag }}</div>\n    <div class=\"col col-sm-4\">{{ doc.descricao }}</div>\n    \n</div>\n\n{% if orders_internas %}\n    <h3>Ordens de Serviço Internas Vinculadas</h3>\n    {% for order in orders_internas %}\n    <div class=\"row\">\n        <div class=\"col col-sm-4\">{{ order.name }}</div>\n    </div>\n    {% endfor %}\n{% endif %}\n\n{% if orders_externas %}\n    <h3>Ordens de Serviço Externas Vinculadas</h3>\n    {% for order in orders_externas %}\n    <div class=\"row\">\n        <div class=\"col col-sm-4\">{{ order.name }}</div>\n    </div>\n    {% endfor %}\n{% endif %}\n\n\n{% endmacro %} \n\n{% if doc.doctype == \"Equipamentos\" %}\n{% set orders_internas = frappe.get_all('Ordem Servico Interna', filters={'serie_number': doc.name, 'customer': doc.customer}, fields=['name']) %}\n{% set orders_externas = frappe.get_all('Ordem Servico Externa', filters={'serie_number': doc.name, 'customer': doc.customer}, fields=['name']) %}\n{{ render_equipamentos(doc, orders_internas, orders_externas) }} \n{% endif %}\n\n<!--Equipamentos-->",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-10-17 10:41:15.346299",
  "module": null,
  "name": "ver",
  "page_blocks": [],
  "published": 1,
  "route": "ver/<doctype>/<docname>",
  "show_sidebar": 1,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "ver",
  "website_sidebar": null
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": "context.padroes_files = frappe.get_all(\"File\", fields=[\"file_name\", \"folder\"], filters={\n    \"folder\": \"Home/Padrões\"\n})\n",
  "css": ".file-box {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20px; /* Espaçamento entre os arquivos */\n    justify-content: flex-start;\n}\n\n.file {\n    background-color: #f4f4f4;\n    padding: 10px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    text-align: center;\n    width: 150px; /* Define a largura de cada item */\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.file a {\n    text-decoration: none;\n    color: inherit;\n}\n\n.image {\n    font-size: 50px;\n    margin-bottom: 10px;\n    color: #333; /* Cor do ícone do arquivo */\n}\n\n.file-name {\n    font-size: 14px;\n    color: #333;\n}\n",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 1,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 1,
  "javascript": null,
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\n<html>\n<link href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css\" rel=\"stylesheet\">\n<body>\n    <h3>Pastas Padrões</h3>\n\n    {% if padroes_files %}\n    <div class=\"file-box\">\n        {% for file in padroes_files %}\n        <div class=\"file\">\n            <a href=\"files/{{file.file_name}}\"> \n                <span class=\"corner\"></span>\n                <div class=\"image\">\n                    <i class=\"fa fa-folder\"></i>\n                </div>\n                <div class=\"file-name\">\n                    {{ file.file_name }}\n                    <br>\n                </div>\n            </a>\n        </div>\n        {% endfor %}\n    </div>\n    {% else %}\n    <p>Nenhuma Pasta Disponível</p>\n    {% endif %}\n</body>\n</html>\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-09-11 11:54:42.111622",
  "module": null,
  "name": "file",
  "page_blocks": [],
  "published": 1,
  "route": "folder",
  "show_sidebar": 1,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "folder",
  "website_sidebar": null
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": "context.padroes_files = frappe.get_all(\"File\", fields=[\"file_name\", \"folder\", \"file_url\"], filters={\n    \"folder\": \"Home/Padrões/\"+frappe.form_dict.name\n})\ncontext.parents = [\n    {\n         \"label\": _(\"Portal\"),\n         \"route\": \"/me\",\n     },\n     {\n         \"label\": _(\"Pastas\"),\n         \"route\": \"/folder/\",\n     }\n]",
  "css": ".file-box {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20px; /* Espaçamento entre os arquivos */\n    justify-content: flex-start;\n}\n\n.file {\n    background-color: #f4f4f4;\n    padding: 10px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    text-align: center;\n    width: 150px; /* Define a largura de cada item */\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.file a {\n    text-decoration: none;\n    color: inherit;\n}\n\n.image {\n    font-size: 50px;\n    margin-bottom: 10px;\n    color: #333; /* Cor do ícone do arquivo */\n}\n\n.file-name {\n    font-size: 14px;\n    color: #333;\n    word-wrap: break-word; /* Quebra palavras longas */\n    text-align: center;\n}\n.web-sidebar{\n    display:none !important;\n}\n.sidebar-column{\n    display:none !important;\n}\n\n",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 1,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 1,
  "javascript": "",
  "main_section": null,
  "main_section_html": "<!DOCTYPE html> \n<html> \n    <link href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css\" rel=\"stylesheet\">\n    <body> \n        <h3>Arquivos</h3> \n        {% if padroes_files %}\n        <div class=\"file-box\">\n            {% for file in padroes_files %}\n            <div class=\"file\">\n                <a href=\"{{ file.file_url }}\" target=\"_blanck\"> \n                    <span class=\"corner\"></span>\n                   <div class=\"image\">\n                    <i class=\"fa fa-file\"></i>\n                    </div>\n                    <div class=\"file-name\">\n                        {{ file.file_name }}\n                        <br>\n                    </div>\n                </a>\n            </div>\n            {% endfor %}\n        </div>\n        {% else %}\n        <p>Nenhuma Pasta Disponível</p>\n        {% endif %}\n    </body> \n</html>\n\n\n\n  ",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-09-11 14:13:59.954901",
  "module": null,
  "name": "files",
  "page_blocks": [],
  "published": 1,
  "route": "folder/files/<name>",
  "show_sidebar": 1,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Arquivos",
  "website_sidebar": ""
 }
]