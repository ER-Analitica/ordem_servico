[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Customer",
  "enabled": 1,
  "modified": "2022-12-20 09:54:13.578525",
  "module": null,
  "name": "CNPJ",
  "script": "var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(t,a,e){t instanceof String&&(t=String(t));for(var n=t.length,s=0;s<n;s++){var r=t[s];if(a.call(e,r,s,t))return{i:s,v:r}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||\"function\"==typeof Object.defineProperties?Object.defineProperty:function(t,a,e){t!=Array.prototype&&t!=Object.prototype&&(t[a]=e.value)},$jscomp.getGlobal=function(t){return\"undefined\"!=typeof window&&window===t?t:\"undefined\"!=typeof global&&null!=global?global:t},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,a,e,n){if(a){for(n=0,e=$jscomp.global,t=t.split(\".\");n<t.length-1;n++){var s=t[n];s in e||(e[s]={}),e=e[s]}(a=a(n=e[t=t[t.length-1]]))!=n&&null!=a&&$jscomp.defineProperty(e,t,{configurable:!0,writable:!0,value:a})}},$jscomp.polyfill(\"Array.prototype.find\",function(t){return t||function(t,a){return $jscomp.findInternal(this,t,a).v}},\"es6\",\"es3\"),function(t,a,e){\"function\"==typeof define&&define.amd?define([\"jquery\"],t):\"object\"==typeof exports&&\"undefined\"==typeof Meteor?module.exports=t(jQuery):t(a||e)}(function(t){var a=function(a,e,n){var s={invalid:[],getCaret:function(){try{var t=0,e=a.get(0),n=document.selection,r=e.selectionStart;if(n&&-1===navigator.appVersion.indexOf(\"MSIE 10\")){var o=n.createRange();o.moveStart(\"character\",-s.val().length),t=o.text.length}else(r||\"0\"===r)&&(t=r);return t}catch(i){}},setCaret:function(t){try{if(a.is(\":focus\")){var e=a.get(0);if(e.setSelectionRange)e.setSelectionRange(t,t);else{var n=e.createTextRange();n.collapse(!0),n.moveEnd(\"character\",t),n.moveStart(\"character\",t),n.select()}}}catch(s){}},events:function(){a.on(\"keydown.mask\",function(t){a.data(\"mask-keycode\",t.keyCode||t.which),a.data(\"mask-previus-value\",a.val()),a.data(\"mask-previus-caret-pos\",s.getCaret()),s.maskDigitPosMapOld=s.maskDigitPosMap}).on(t.jMaskGlobals.useInput?\"input.mask\":\"keyup.mask\",s.behaviour).on(\"paste.mask drop.mask\",function(){setTimeout(function(){a.keydown().keyup()},100)}).on(\"change.mask\",function(){a.data(\"changed\",!0)}).on(\"blur.mask\",function(){i===s.val()||a.data(\"changed\")||a.trigger(\"change\"),a.data(\"changed\",!1)}).on(\"blur.mask\",function(){i=s.val()}).on(\"focus.mask\",function(a){!0===n.selectOnFocus&&t(a.target).select()}).on(\"focusout.mask\",function(){n.clearIfNotMatch&&!r.test(s.val())&&s.val(\"\")})},getRegexMask:function(){for(var t,a,n,s,r=[],i=0;i<e.length;i++)(t=o.translation[e.charAt(i)])?(a=t.pattern.toString().replace(/.{1}$|^.{1}/g,\"\"),n=t.optional,(t=t.recursive)?(r.push(e.charAt(i)),s={digit:e.charAt(i),pattern:a}):r.push(n||t?a+\"?\":a)):r.push(e.charAt(i).replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g,\"\\\\$&\"));return r=r.join(\"\"),s&&(r=r.replace(RegExp(\"(\"+s.digit+\"(.*\"+s.digit+\")?)\"),\"($1)?\").replace(RegExp(s.digit,\"g\"),s.pattern)),RegExp(r)},destroyEvents:function(){a.off(\"input keydown keyup paste drop blur focusout \".split(\" \").join(\".mask \"))},val:function(t){var e=a.is(\"input\")?\"val\":\"text\";return 0<arguments.length?(a[e]()!==t&&a[e](t),e=a):e=a[e](),e},calculateCaretPosition:function(t){var e=s.getMasked(),n=s.getCaret();if(t!==e){var r=a.data(\"mask-previus-caret-pos\")||0;e=e.length;var o,i=t.length,l=t=0,c=0,u=0;for(o=n;o<e&&s.maskDigitPosMap[o];o++)l++;for(o=n-1;0<=o&&s.maskDigitPosMap[o];o--)t++;for(o=n-1;0<=o;o--)s.maskDigitPosMap[o]&&c++;for(o=r-1;0<=o;o--)s.maskDigitPosMapOld[o]&&u++;n>i?n=10*e:r>=n&&r!==i?s.maskDigitPosMapOld[n]||(r=n,n=n-(u-c)-t,s.maskDigitPosMap[n]&&(n=r)):n>r&&(n=n+(c-u)+l)}return n},behaviour:function(e){e=e||window.event,s.invalid=[];var n=a.data(\"mask-keycode\");if(-1===t.inArray(n,o.byPassKeys)){n=s.getMasked();var r=s.getCaret(),i=a.data(\"mask-previus-value\")||\"\";return setTimeout(function(){s.setCaret(s.calculateCaretPosition(i))},t.jMaskGlobals.keyStrokeCompensation),s.val(n),s.setCaret(r),s.callbacks(e)}},getMasked:function(t,a){var r,i=[],l=void 0===a?s.val():a+\"\",c=0,u=e.length,p=0,f=l.length,k=1,v=\"push\",d=-1,h=0;if(a=[],n.reverse){v=\"unshift\",k=-1;var m=0;c=u-1,p=f-1;var g=function(){return -1<c&&-1<p}}else m=u-1,g=function(){return c<u&&p<f};for(;g();){var $=e.charAt(c),M=l.charAt(p),y=o.translation[$];y?(M.match(y.pattern)?(i[v](M),y.recursive&&(-1===d?d=c:c===m&&c!==d&&(c=d-k),m===d&&(c-=k)),c+=k):M===r?(h--,r=void 0):y.optional?(c+=k,p-=k):y.fallback?(i[v](y.fallback),c+=k,p-=k):s.invalid.push({p:p,v:M,e:y.pattern}),p+=k):(t||i[v]($),M===$?(a.push(p),p+=k):(r=$,a.push(p+h),h++),c+=k)}return t=e.charAt(m),u!==f+1||o.translation[t]||i.push(t),i=i.join(\"\"),s.mapMaskdigitPositions(i,a,f),i},mapMaskdigitPositions:function(t,a,e){for(t=n.reverse?t.length-e:0,s.maskDigitPosMap={},e=0;e<a.length;e++)s.maskDigitPosMap[a[e]+t]=1},callbacks:function(t){var r=s.val(),o=r!==i,l=[r,t,a,n],c=function(t,a,e){\"function\"==typeof n[t]&&a&&n[t].apply(this,e)};c(\"onChange\",!0===o,l),c(\"onKeyPress\",!0===o,l),c(\"onComplete\",r.length===e.length,l),c(\"onInvalid\",0<s.invalid.length,[r,t,a,s.invalid,n])}};a=t(a);var r,o=this,i=s.val();e=\"function\"==typeof e?e(s.val(),void 0,a,n):e,o.mask=e,o.options=n,o.remove=function(){var t=s.getCaret();return o.options.placeholder&&a.removeAttr(\"placeholder\"),a.data(\"mask-maxlength\")&&a.removeAttr(\"maxlength\"),s.destroyEvents(),s.val(o.getCleanVal()),s.setCaret(t),a},o.getCleanVal=function(){return s.getMasked(!0)},o.getMaskedVal=function(t){return s.getMasked(!1,t)},o.init=function(i){if(i=i||!1,n=n||{},o.clearIfNotMatch=t.jMaskGlobals.clearIfNotMatch,o.byPassKeys=t.jMaskGlobals.byPassKeys,o.translation=t.extend({},t.jMaskGlobals.translation,n.translation),o=t.extend(!0,{},o,n),r=s.getRegexMask(),i)s.events(),s.val(s.getMasked());else{n.placeholder&&a.attr(\"placeholder\",n.placeholder),a.data(\"mask\")&&a.attr(\"autocomplete\",\"off\"),i=0;for(var l=!0;i<e.length;i++){var c=o.translation[e.charAt(i)];if(c&&c.recursive){l=!1;break}}l&&a.attr(\"maxlength\",e.length).data(\"mask-maxlength\",!0),s.destroyEvents(),s.events(),i=s.getCaret(),s.val(s.getMasked()),s.setCaret(i)}},o.init(!a.is(\"input\"))};t.maskWatchers={};var e=function(){var e=t(this),s={},r=e.attr(\"data-mask\");if(e.attr(\"data-mask-reverse\")&&(s.reverse=!0),e.attr(\"data-mask-clearifnotmatch\")&&(s.clearIfNotMatch=!0),\"true\"===e.attr(\"data-mask-selectonfocus\")&&(s.selectOnFocus=!0),n(e,r,s))return e.data(\"mask\",new a(this,r,s))},n=function(a,e,n){n=n||{};var s=t(a).data(\"mask\"),r=JSON.stringify;a=t(a).val()||t(a).text();try{return\"function\"==typeof e&&(e=e(a)),\"object\"!=typeof s||r(s.options)!==r(n)||s.mask!==e}catch(o){}},s=function(t){var a=document.createElement(\"div\"),e=(t=\"on\"+t)in a;return e||(a.setAttribute(t,\"return;\"),e=\"function\"==typeof a[t]),e};t.fn.mask=function(e,s){s=s||{};var r=this.selector,o=t.jMaskGlobals,i=o.watchInterval;o=s.watchInputs||o.watchInputs;var l=function(){if(n(this,e,s))return t(this).data(\"mask\",new a(this,e,s))};return t(this).each(l),r&&\"\"!==r&&o&&(clearInterval(t.maskWatchers[r]),t.maskWatchers[r]=setInterval(function(){t(document).find(r).each(l)},i)),this},t.fn.masked=function(t){return this.data(\"mask\").getMaskedVal(t)},t.fn.unmask=function(){return clearInterval(t.maskWatchers[this.selector]),delete t.maskWatchers[this.selector],this.each(function(){var a=t(this).data(\"mask\");a&&a.remove().removeData(\"mask\")})},t.fn.cleanVal=function(){return this.data(\"mask\").getCleanVal()},t.applyDataMask=function(a){((a=a||t.jMaskGlobals.maskElements)instanceof t?a:t(a)).filter(t.jMaskGlobals.dataMaskAttr).each(e)},s={maskElements:\"input,td,span,div\",dataMaskAttr:\"*[data-mask]\",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&s(\"input\"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\\d/},9:{pattern:/\\d/,optional:!0},\"#\":{pattern:/\\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}},t.jMaskGlobals=t.jMaskGlobals||{},(s=t.jMaskGlobals=t.extend(!0,{},s,t.jMaskGlobals)).dataMask&&t.applyDataMask(),setInterval(function(){t.jMaskGlobals.watchDataMask&&t.applyDataMask()},s.watchInterval)},window.jQuery,window.Zepto);\n\n\nfunction cnpjValidation(value) {\n  if (!value) return false\n\n  // Aceita receber o valor como string, n\u00famero ou array com todos os d\u00edgitos\n  const isString = typeof value === 'string'\n  const validTypes = isString || Number.isInteger(value) || Array.isArray(value)\n\n  // Elimina valor em formato inv\u00e1lido\n  if (!validTypes) return false\n\n  // Filtro inicial para entradas do tipo string\n  if (isString) {\n    // Limita ao m\u00e1ximo de 18 caracteres, para CNPJ formatado\n    if (value.length > 18) return false\n\n    // Teste Regex para veificar se \u00e9 uma string apenas d\u00edgitos v\u00e1lida\n    const digitsOnly = /^\\d{14}$/.test(value)\n    // Teste Regex para verificar se \u00e9 uma string formatada v\u00e1lida\n    const validFormat = /^\\d{2}.\\d{3}.\\d{3}\\/\\d{4}-\\d{2}$/.test(value)\n\n    // Se o formato \u00e9 v\u00e1lido, usa um truque para seguir o fluxo da valida\u00e7\u00e3o\n    if (digitsOnly || validFormat) true\n    // Se n\u00e3o, retorna inv\u00e1lido\n    else return false\n  }\n\n  // Guarda um array com todos os d\u00edgitos do valor\n  const match = value.toString().match(/\\d/g)\n  const numbers = Array.isArray(match) ? match.map(Number) : []\n\n  // Valida a quantidade de d\u00edgitos\n  if (numbers.length !== 14) return false\n  \n  // Elimina inv\u00e1lidos com todos os d\u00edgitos iguais\n  const items = [...new Set(numbers)]\n  if (items.length === 1) return false\n\n  // C\u00e1lculo validador\n  const calc = (x) => {\n    const slice = numbers.slice(0, x)\n    let factor = x - 7\n    let sum = 0\n\n    for (let i = x; i >= 1; i--) {\n      const n = slice[x - i]\n      sum += n * factor--\n      if (factor < 2) factor = 9\n    }\n\n    const result = 11 - (sum % 11)\n\n    return result > 9 ? 0 : result\n  }\n\n  // Separa os 2 \u00faltimos d\u00edgitos de verificadores\n  const digits = numbers.slice(12)\n  \n  // Valida 1o. d\u00edgito verificador\n  const digit0 = calc(12)\n  if (digit0 !== digits[0]) return false\n\n  // Valida 2o. d\u00edgito verificador\n  const digit1 = calc(13)\n  return digit1 === digits[1]\n}\nfrappe.ui.form.on(\"Customer\",{\n  refresh(frm){\n      frm.fields_dict.cnpj.$input.mask('00.000.000/0000-00');\n  }\n}),\nfrappe.ui.form.on(\"Customer\", \"cnpj\", function (frm) { \nif (frm.doc.cnpj.length != 18){\n    frm.set_value(\"cnpj\", null)\n    frappe.throw('CNPJ Inv\u00e1lido')\n}\n\t\nif (cnpjValidation(frm.doc.cnpj) == false){\n\tfrm.set_value(\"cnpj\", null)\n\tfrappe.throw('CNPJ Inv\u00e1lido!')\t\n}\n\nfrappe.call({ \n    method: 'ordem_servico.api.get_cnpj',\n    args: {\n\t   'cnpj': frm.doc.cnpj,\n    \t}, \n    callback: function(r) {\n        // code snippet\n\tdebugger;\n\tObject.keys(r.message).forEach(key => frm.set_value(key, r.message[key]));\n    } \n    }); \n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Quotation",
  "enabled": 1,
  "modified": "2022-12-20 09:30:50.738687",
  "module": null,
  "name": "Quotation images",
  "script": "frappe.ui.form.on(\"Quotation\", {\n    validate(frm){\n\tif (frm.doc.defeito_constatado && frm.doc.defeito_constatado.length){\n         frm.set_value(\"defeito_constatado\", frm.doc.defeito_constatado.replaceAll(\"img src=\", 'img style=\"max-width:150px; max-height:150px; width: auto; height: auto;\" src='));\n    }\n}\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Invoice",
  "enabled": 1,
  "modified": "2022-12-20 09:30:44.872901",
  "module": null,
  "name": "Update Stock",
  "script": "frappe.ui.form.on(\"Sales Invoice\", {\n    validate(frm){\n        frm.set_value(\"update_stock\", 1);\n    }\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Address",
  "enabled": 1,
  "modified": "2022-12-20 09:30:39.227439",
  "module": null,
  "name": "CEP",
  "script": "frappe.ui.form.on(\"Address\", \"cep\", function (frm) { \n    if (!frm.doc.cep) \n    return; \nfrappe.call({ \n    method: 'ordem_servico.api.get_cep',\n    args: {\n\t   'cep': frm.doc.cep,\n    \t}, \n    callback: function(r) {\n        // code snippet\n\tdebugger;\n\tObject.keys(r.message).forEach(key => frm.set_value(key, r.message[key]));\n    } \n    }); \n});",
  "view": "Form"
 }
]